package com.example.security;

import android.os.Bundle;
import android.text.method.ScrollingMovementMethod;
import android.util.Log;
import android.widget.TextView;

import androidx.annotation.Nullable;
import androidx.appcompat.app.AppCompatActivity;

import java.util.List;

public class ReportActivity extends AppCompatActivity {

    private TextView reportText;
    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_report);
        reportText = findViewById(R.id.textViewReport);
        reportText.setMovementMethod(new ScrollingMovementMethod());
    }

    @Override
    protected void onStart() {
        super.onStart();
        Log.e("ReportActivity","---------------#####################onStart()");

    }

    @Override
    protected void onResume() {
        super.onResume();
        Log.e("ReportActivity","---------------#####################onResume()");
        List<AppdataTemplate> collectedData = Utility.getInstance().getDataValue();

        if(collectedData != null){


            reportText.append("Android version: "+ collectedData.get(0).getAndroidVersion()+"\n");
            reportText.append("Device Name: "+ collectedData.get(0).getDeviceName()+"\n");
            reportText.append("Mac: "+collectedData.get(0).getMac()+"\n");
            for(int i=0; i<collectedData.size(); i++){


                reportText.append("Application Name: "+collectedData.get(i).getApplicationName()+"\n");
                reportText.append("Package: "+collectedData.get(i).getPackageName()+"\n");
                reportText.append("Version: "+collectedData.get(i).getApkVersion()+"\n");

                reportText.append("Time: "+collectedData.get(i).getTimeStamps()+"\n");
                reportText.append("Camera access: "+collectedData.get(i).isCameraPermission()+"\n");
                reportText.append("Contacts access: "+collectedData.get(i).isContactPermission()+"\n");
                reportText.append("Memory access: "+collectedData.get(i).isMemoryPermission()+"\n");
                reportText.append("SMS access: "+collectedData.get(i).isSmsPermission()+"\n");
                reportText.append("Microphone access: "+collectedData.get(i).isMicroPhonePermission()+"\n");
                reportText.append("GPS access: "+collectedData.get(i).isLocationPermission()+"\n");

                reportText.append("\n"+"\n");
            }

        }else{
            reportText.append("No data collected in this session");
        }
    }

    @Override
    protected void onPause() {
        super.onPause();
        Log.e("ReportActivity","---------------#####################onPause()");
    }

    @Override
    protected void onStop() {
        super.onStop();
        Log.e("ReportActivity","---------------#####################onPause()");
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        Log.e("ReportActivity","---------------#####################onDestroy()");
    }
}
